<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="root">
    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png" alt="" id="imgSqr">
  </div>
  <script>
    const root = document.getElementById('root')
    const imgSqr = document.getElementById('imgSqr')
    // https://pokeapi.co/api/v2/pokemon-species/1/?offset=0&limit=100000 //리미트해제
    const tempArrayDex =[] // 배열 선언
    function tmpArrSort(a,b){
      if(a.id<b.id){ //a.id가 b.id보다 작으면, a -1해라
        return -1;
      }
      if(a.id>b.id){
        return +1;
      }
    }

    for(let i=1;i<1011;i++){
      const xhr1 = new XMLHttpRequest();

      const _URLDex = `https://pokeapi.co/api/v2/pokemon-species/${i}` //전체넘버 추출용
      
      xhr1.open('GET',_URLDex)
      xhr1.send();
      xhr1.addEventListener("load",function(){  
        
        const _PokeData = JSON.parse(xhr1.response)
        tempArrayDex.push(_PokeData)
        tempArrayDex.sort(tmpArrSort)
        
      })
    }

    imgSqr.addEventListener('click',function(){
      const element = document.createElement('a')
      element.style.display = 'none'
      element.href ='data:text/plain;charset=utf-8,' +  "const totData = "+ JSON.stringify(tempArrayDex)
      element.download = "totData.txt"

      root.appendChild(element)
      element.click();
      root.removeChild(element)


      console.log(tempArrayDex.length)
      
      console.log(tempArrayDex[0])
      console.log(tempArrayDex[0].id)
      console.log(tempArrayDex[500].id)
      console.log(tempArrayDex[1000].id)
      
    })

    


  </script>

</body>
</html>